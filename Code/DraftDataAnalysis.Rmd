---
title: "Draft Data Analysis and Report"
author: "Aubrey Ahern"
date: "11/14/2022"
output: html_document
---

#Introduction
I took my data from https://data.chhs.ca.gov/dataset/hiv-aids-cases. This work outlines all cause deaths in HIV/AIDS by gender, age, race/ethnicity, and transmission category. This data was collected from 2011-2017 within the state of California in order to collect public health information.

As outlined within the assignment, I will be using the following steps to structure my Data Analysis: find data set -> repair data set -> plot relationships -> summarize focal data -> plot expected relationships in data -> guess expected relationships before fitting model -> decide on a statistical model -> check model assumptions -> run statistical model -> interpret your model ->replot data and model to show key relationships

#Getting Started
Set things up:
```{r}
rm(list = ls())
library(here)
library(ggfortify)
library(tidyverse)
```

I made sure my data was compatible to work with R by adjusting column names to exclude spaces and special characters and so that categories were organized as columns instead of rows. Throughout this process, I made sure that each cell contained only one piece of information.

I would also like to address the limitations of this data set before I beging my main code. While this data set contains a lot of information on demographic information on those who have died from HIV/AIDS, it only includes one piece of information per datum. I have looked into how I can adjust this extensively but it seems that it's not a matter of data organization but a matter of how the data was collected. So, here's my best shot to make this data set work.

Import my data set:
```{r}
DF <- read.csv(here("Data", "fixed-deaths.csv"), stringsAsFactors = TRUE)
```

#Analysis

Let's consider my first relationship and look at the data between gender and the count of those who died.
```{r}
DF %>%
  group_by(current_gender) %>%
  summarise(count = n()) %>%
  arrange(desc(count))
```

Now let's visualize it.
```{r}
ggplot(DF, aes(current_gender, count))+
     geom_boxplot()+
     geom_point()
```

Based on the information provided by looking at the data, I can hypothesize that there is no relationship between gender and those who died of HIV/AIDS.

Now, let's run a statistical test to see if I can accept the null hypothesis as predicted. This relationship includes one piece of categorical data (current gender) and one piece of count data (count). Thus, I will conduct an ANOVA test.

```{r}
myMod <- lm(count ~ current_gender, data = DF)
```

I am not sure what I am doing wrong at this step, I keep getting this error message "Show in New Window Warning in model.response(mf, "numeric") : using type = "numeric" with a factor response will be ignored Warning in Ops.factor(y, z$residuals) : ‘-’ not meaningful for factors"
I will need to resolve this so that I can run my anova test and create a complete draft/presentation.

```{r}
anova(myMod)
```

Now let's consider my second relationship and look at the data between age_at_death and the count of those who died.
```{r}
DF %>%
  group_by(age_at_death) %>%
  summarise(count = n()) %>%
  arrange(desc(count))
```

Now let's visualize it.
```{r}
ggplot(DF, aes(age_at_death, count))+
     geom_boxplot()+
     geom_point()
```

Based on the information provided by looking at the data, I can hypothesize that there is no relationship between age at death and those who died of HIV/AIDS.

Now, let's run a statistical test to see if I can accept the null hypothesis as predicted. I will conduct another ANOVA test.

```{r}
myMod2 <- lm(count ~ age_at_death, data = DF)
```

I am not sure what I am doing wrong at this step, I keep getting this error message "Show in New Window Warning in model.response(mf, "numeric") : using type = "numeric" with a factor response will be ignored Warning in Ops.factor(y, z$residuals) : ‘-’ not meaningful for factors"
I will need to resolve this so that I can run my anova test and create a complete draft/presentation.

```{r}
anova(myMod2)
```

#Biological Summary / Challenges
I was not able to run my anova tests to see either of my relationships. While I was unable to run my statistical tests at this time, I plan to do a lot of work over the break in order to fix this problem. I suspect that the problem is relating to the set up of my data as I mentioned before. If this is the case, I will find a new data set to work with. 

